<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>الدورات والمستويات</title>

<style>
body{
  margin:0;
  padding:16px;
  font-family:Tahoma,sans-serif;
  background:#f0f4f8;
}

/* container */
#courses{
  max-width:420px;
  margin:auto;
}

/* course */
.course{
  margin-bottom:14px;
}
.course-btn{
  width:100%;
  padding:18px;
  font-size:18px;
  background:#667eea;
  color:#fff;
  border:none;
  border-radius:14px;
  cursor:pointer;
  text-align:right;
}

/* levels */
.levels{
  display:none;
  margin-top:10px;
}
.level-btn{
  width:100%;
  margin-bottom:6px;
  padding:12px;
  font-size:16px;
  background:#fff;
  border:1px solid #ddd;
  border-radius:10px;
  display:flex;
  justify-content:space-between;
  cursor:pointer;
}
.count{
  background:#444;
  color:#fff;
  padding:2px 8px;
  border-radius:8px;
  font-size:12px;
}

/* modal */
#modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  justify-content:center;
  align-items:center;
}
#modalBox{
  background:#fff;
  padding:20px;
  width:90%;
  max-width:300px;
  border-radius:12px;
  text-align:center;
  position:relative;
}

/* زر الإغلاق */
.close-btn{
  position:absolute;
  top:8px;
  left:8px;
  width:28px;
  height:28px;
  border:none;
  border-radius:50%;
  background:#eee;
  font-size:18px;
  cursor:pointer;
}

#modalBox input{
  width:100%;
  padding:8px;
  margin-bottom:8px;
}
#modalBox button.login{
  width:100%;
  padding:8px;
}
</style>
</head>

<body>

<div id="courses"></div>

<!-- نافذة تسجيل الدخول -->
<div id="modal" onclick="closeOnOutside(event)">
  <div id="modalBox">
    <button class="close-btn" onclick="closeModal()">×</button>

    <h3>تسجيل الدخول</h3>
    <input id="sid" placeholder="الرقم الأكاديمي">
    <input id="spass" type="password" placeholder="كلمة السر">
    <button class="login" onclick="login()">دخول</button>
    <p id="msg" style="color:red"></p>
  </div>
</div>

<script>
/* ===== الأقسام ===== */
var courses = [
  { id:'graphics',   name:'دورة الجرافيكس' },
  { id:'programming',name:'دورة البرمجة' },
  { id:'design',     name:'دورة التصميم' },
  { id:'animation',  name:'دورة الأنيميشن' },
  { id:'ai',         name:'دورة الذكاء الاصطناعي' },
  { id:'cyber',      name:'دورة الأمن السيبراني' },
  { id:'office',     name:'دورة تطبيقات الأوفيس' },
  { id:'network',    name:'دورة الشبكات' },
  { id:'hardware',   name:'دورة الهاردوير' },
  { id:'mobile',     name:'دورة تطوير التطبيقات' },
  { id:'web',        name:'دورة تطوير الويب' },
  { id:'data',       name:'دورة تحليل البيانات' }
];

/* ===== عدد الطلاب ===== */
var studentCounts = {
  'graphics-1':4,
  'graphics-2':0,
  'programming-1':0,
  'programming-2':0
};

/* ===== صلاحيات الدخول ===== */
var accessData = {
  'graphics-1':[
    {id:'1003',pass:'1003'},
    {id:'2',pass:'dev.771944205'}
  ]
};

var currentKey = "";
var box = document.getElementById("courses");

/* ===== بناء الصفحة ===== */
for(var i=0;i<courses.length;i++){
  var c = courses[i];

  var courseDiv = document.createElement("div");
  courseDiv.className = "course";

  var btn = document.createElement("button");
  btn.className = "course-btn";
  btn.textContent = c.name;
  btn.onclick = (function(id){
    return function(){
      var el = document.getElementById(id);
      el.style.display = el.style.display==="block" ? "none" : "block";
    };
  })(c.id);

  var levels = document.createElement("div");
  levels.className = "levels";
  levels.id = c.id;

  for(var l=1;l<=10;l++){
    var key = c.id + "-" + l;
    var count = studentCounts[key] || 0;

    var lbtn = document.createElement("button");
    lbtn.className = "level-btn";
    lbtn.innerHTML =
      "<span>اختبار المستوى "+l+"</span>" +
      "<span class='count'>"+count+"</span>";

    lbtn.onclick = (function(k){
      return function(){
        currentKey = k;
        document.getElementById("modal").style.display="flex";
        document.getElementById("msg").textContent="";
        document.getElementById("sid").value="";
        document.getElementById("spass").value="";
      };
    })(key);

    levels.appendChild(lbtn);
  }

  courseDiv.appendChild(btn);
  courseDiv.appendChild(levels);
  box.appendChild(courseDiv);
}

/* ===== إغلاق النافذة ===== */
function closeModal(){
  document.getElementById("modal").style.display="none";
}
function closeOnOutside(e){
  if(e.target.id === "modal"){
    closeModal();
  }
}

/* ===== تسجيل الدخول ===== */
function login(){
  var id = document.getElementById("sid").value;
  var pass = document.getElementById("spass").value;
  var list = accessData[currentKey] || [];

  for(var i=0;i<list.length;i++){
    if(list[i].id===id && list[i].pass===pass){
      alert("تم الدخول بنجاح");
      closeModal();
      return;
    }
  }
  document.getElementById("msg").textContent="غير مصرح بالدخول";
}
</script>

</body>
</html>
